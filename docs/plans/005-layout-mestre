# üìê Plano de A√ß√£o: Desenvolvimento do Layout (Frontend)

**Refer√™ncia:** `docs/plans/005-layout-mestre`
**Data:** 03/01/2026
**Status:** Planejado (Com Wireframes)

Este documento define a estrat√©gia visual e funcional para o desenvolvimento do frontend do SellTrack PDV, focado em alta densidade de informa√ß√µes (desktop-first) e agilidade operacional.

---

## 1. üé® Diretrizes Globais de UX/UI

### 1.1. Filosofia "Notebook-First"
O sistema ser√° operado primariamente em notebooks. O layout deve privilegiar a densidade de informa√ß√£o sobre o "respiro" (whitespace).
- **Densidade:** `Compact` por padr√£o. Tabelas e listas com padding reduzido.
- **Scroll:** Evitar scroll na tela de PDV. Scroll permitido em Relat√≥rios e Listagens.
- **Responsividade:** Secund√°ria. O layout n√£o deve quebrar em telas menores, mas n√£o √© otimizado para mobile (celular) nesta fase.

### 1.2. Feedback do Sistema (Regra de Ouro)
Como o sistema √© online (MVP), o usu√°rio precisa sentir que o sistema est√° respondendo.
- **Loading Global:** Barra de progresso `NProgress` ou similar no topo da janela para trocas de rota.
- **Loading Local:** Todo `Button` deve entrar em estado `loading` (spinner + disabled) imediatemente ap√≥s o clique at√© a resposta do servidor.
- **Toasts:** Notifica√ß√µes flutuantes para Sucesso (Verde), Erro (Vermelho) e Alerta (Amarelo).

### 1.3. Widget de Conex√£o (Sem√°foro)
Componente onipresente no Header.
- **üü¢ Online:** √çcone verde discreto ou invis√≠vel (apenas tooltip).
- **üî¥ Offline/Inst√°vel:** √çcone vermelho/amarelo pulsante com texto explicativo "Tentando reconectar...". Bloqueia a√ß√µes cr√≠ticas (ex: Finalizar Venda).

---

## 2. üèóÔ∏è Estrutura do Layout Mestre (App Shell)

O App Shell √© o esqueleto que sustenta todas as p√°ginas.

### 2.1. Sidebar (Menu Lateral)
- **Comportamento:** Retr√°til (Collapsible). O usu√°rio pode recolher para ganhar largura de tela.
- **Estados:**
    - *Expandido (Default):* √çcone + Texto. Largura ~240px.
    - *Recolhido:* Apenas √çcones (Tooltip no hover). Largura ~64px.
- **Itens de Menu:**
    1.  **Dashboard** (Home)
    2.  **PDV** (Destaque visual, talvez um bot√£o separado ou cor diferente)
    3.  **Produtos** (Invent√°rio)
    4.  **Relat√≥rios**
    5.  **Configura√ß√µes** (Usu√°rios, Perfil)

### 2.2. Header (Topo)
- **Altura:** Compacta (~60px).
- **Esquerda:** **Breadcrumbs** autom√°tico (ex: Produtos > Editar > Camisa Polo).
- **Centro:** **Widget de Conex√£o**.
- **Direita:** Avatar/Menu do Usu√°rio + Bot√£o de Logout.

### 2.3. √Årea de Conte√∫do
- **Container Padr√£o:** Padding interno de `16px` ou `24px` para p√°ginas administrativas (Produtos, Relat√≥rios).
- **Container Full:** Padding `0` para a p√°gina de PDV (aproveitamento total).

---

## 3. üì¶ M√≥dulo de Produtos: Visualiza√ß√£o Hier√°rquica

Desafio: Exibir Produtos Pai (ex: Camiseta) e suas Varia√ß√µes (ex: P/M/G, Vermelho/Azul) sem poluir a tela.

### 3.1. Solu√ß√£o: Tabela "Master-Detail" com Accordion
Uma tabela principal lista os Produtos Pais.

| √çcone | Nome | Categoria | Varia√ß√µes | Estoque Total | Pre√ßo (Range) | A√ß√µes |
|:---:|:---|:---|:---:|:---:|:---:|:---:|
| üëï | Camisa Polo | Roupas | 12 vars | 45 unid | R$ 50 - 60 | [Edit] [Add Var] |

**Ao clicar na linha (Expandir):**
Uma subtabela se abre logo abaixo, listando as varia√ß√µes.

    ‚Ü≥ | SKU | Cor | Tamanho | Estoque | Pre√ßo | A√ß√µes |
      | CP-VER-M | Vermelho | M | 5 | R$ 50 | [Ajuste R√°pido] |
      | CP-AZU-G | Azul | G | 2 | R$ 60 | [Ajuste R√°pido] |

### 3.2. Edi√ß√£o R√°pida (Quick Edit)
Na subtabela de varia√ß√µes, permitir clicar no "Estoque" e editar o n√∫mero diretamente (inline edit) sem abrir uma nova p√°gina, salvando no `onBlur` ou `Enter`. Isso agiliza a corre√ß√£o de invent√°rio.

---

## 4. üõí Detalhamento da Tela de PDV

Esta √© a tela mais cr√≠tica. Deve ser imersiva e impedir distra√ß√µes.

### 4.1. Layout Dividido (Split Screen)
- **Painel Esquerdo (60-70%): √Årea de Busca e Sele√ß√£o**
    - **Topo:** Barra de Busca Grande (Foco autom√°tico ao abrir). Aceita Nome ou SKU.
    - **Meio:** Grid ou Lista de Produtos encontrados.
        - *Card de Produto:* Mostra Nome, Pre√ßo e **Badges de Varia√ß√£o** (ao clicar, abre modal r√°pido pra escolher tamanho/cor se necess√°rio, ou adiciona direto se for produto simples).
    - **Teclas de Atalho:** F2 (Busca), F9 (Finalizar), Esc (Limpar).

- **Painel Direito (30-40%): O Cupom (Carrinho)**
    - **Visual:** Similar a um cupom fiscal. Fundo branco/papel.
    - **Lista de Itens:**
        - `1x Camisa Polo (Vermelho/M) ... R$ 50,00 [X]`
    - **Rodap√© Fixo:**
        - Subtotal
        - Descontos
        - **TOTAL (Fonte Grande)**
        - Bot√£o Gigante "FINALIZAR (F9)"

### 4.2. Modal de Pagamento (Split Payment)
Ao clicar em Finalizar, um Modal sobrep√µe a tela (Overlay escuro).

**Estrutura do Modal:**
1.  **Cabe√ßalho:** "Total a Pagar: R$ 150,00"
2.  **Lista de Pagamentos Adicionados:** (Inicialmente vazia).
3.  **Controles de Adi√ß√£o:**
    - [ Dropdown: Forma (Pix/Dinheiro/Cr√©dito) ] [ Input: Valor (Auto-preenchido com o restante) ] [ Bot√£o: Adicionar (+) ]
4.  **Resumo de Restante:**
    - "Faltam: R$ 50,00" (Vermelho) ou "Troco: R$ 0,00" (Verde).
5.  **Bot√£o Concluir:**
    - Desabilitado se "Faltam" > 0.
    - Habilitado se "Faltam" == 0 (ou troco gerado).

---

## 5. üìÖ Ordem de Implementa√ß√£o Sugerida

Para garantir entregas de valor cont√≠nuo e test√°vel:

### **Fase 1: Funda√ß√£o (Dias 1-2)**
1.  **Componentes Base UI:** Bot√µes, Inputs, Cards (Tailwind + Biblioteca de √≠cones Phosphor).
2.  **Layout Shell:** Sidebar e Header funcionais (Roteamento).
3.  **Hooks Globais:** Estado de Loading e Toastify.

### **Fase 2: Gest√£o de Invent√°rio (Dias 3-5)**
4.  **Lista de Produtos:** Implementar Tabela Accordion (Pai/Filho).
5.  **Formul√°rio de Produto:** Cria√ß√£o de Pai e inser√ß√£o de varia√ß√µes.

### **Fase 3: O Cora√ß√£o - PDV (Dias 6-8)**
6.  **Layout PDV:** Construir o Grid (Esquerda) e Carrinho (Direita).
7.  **L√≥gica de Carrinho:** Adicionar/Remover itens, c√°lculo de total local.
8.  **Modal de Pagamento:** L√≥gica de Split Payment (banco de mem√≥ria local antes de integrar back).

### **Fase 4: Conex√£o (Integra√ß√£o) (Dias 9+)**
9.  Conectar Telas √†s APIs reais.
10. Implementar Widgets de Feedback de Rede.

---

## 6. üñçÔ∏è Wireframes (Baixa Fidelidade)

### 6.1. Tela Principal (App Shell) + Listagem de Produtos

```text
+-----------------------------------------------------------------------+
| HEADER: [Logo] [Breadcrumb: Produtos]     [ üü¢ Online ]  [User ‚ñæ]     |
+-------------+---------------------------------------------------------+
| [ SIDEBAR ] | [ Container "PageContent"                             ] |
|             |                                                         |
|  Dashboard  |  +---------------------------------------------------+  |
|  PDV        |  | [ Busca... ]            [ + Novo Produto ]        |  |
| >Produtos   |  +---------------------------------------------------+  |
|  Relat√≥rios |                                                         |
|  Config     |  +---------------------------------------------------+  |
|             |  | PRODUTO       | VARS | ESTOQUE | PRE√áO    | ACTIONS |  |
|             |  | > Camisa Polo | 12   | 45      | R$ 50-60 | [Edit]  |  |
| [ < ]       |  |   v (Expanded details...)                           |  |
| (Retrair)   |  |   | SKU: CP01-P | P | 10 un | R$ 50 | [Adjust]    |  |
|             |  |   | SKU: CP01-M | M | 35 un | R$ 50 | [Adjust]    |  |
|             |  |                                                     |  |
|             |  | > Cal√ßa Jeans | 2    | 10      | R$ 100   | [Edit]  |  |
|             |  +---------------------------------------------------+  |
+-------------+---------------------------------------------------------+
```

### 6.2. Tela de PDV (Full Screen)

```text
+-----------------------------------------------------------------------+
| HEADER: [Logo]   [ üü¢ Online ]   [User ‚ñæ]                             |
+----------------------------------------+------------------------------+
| PAINEL DE BUSCA & SELE√á√ÉO (65%)        | PAINEL DO CUPOM (35%)        |
| (Fundo Cinza Claro)                    | (Fundo Branco - "Papel")     |
|                                        |                              |
| +------------------------------------+ |  CUPOM #1234                 |
| | [ üîç Buscar Produto/SKU (F2) ]     | |                              |
| +------------------------------------+ |  1x Camisa Polo (Azul/M)     |
|                                        |     R$ 50,00           [x]   |
| RESULTADOS:                            |                              |
| +-----------+ +-----------+ +--------+ |  2x Meia Soquete             |
| | CAMISA P. | | CAL√áA J.  | | CINTO  | |     R$ 20,00 (10ea)    [x]   |
| | R$ 50,00  | | R$ 100,00 | | R$ 30  | |                              |
| | [P][M][G] | | [38][40]  | | UN     | |  -------------------------   |
| +-----------+ +-----------+ +--------+ |                              |
| +-----------+ +-----------+            |  Subtotal:      R$ 90,00     |
| |           | |           |            |  Desconto:      R$  0,00     |
| +-----------+ +-----------+            |                              |
|                                        |  TOTAL:      R$ 90,00        |
|                                        |                              |
|                                        | +--------------------------+ |
|                                        | |    FINALIZAR (F9)        | |
|                                        | +--------------------------+ |
+----------------------------------------+------------------------------+
```
